<!DOCTYPE html>
<h:html
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    lang="es">
<h:head>
    <title>Bienvenido!</title>
    <link rel="stylesheet" type="text/css" href="../css/login.css" />
    <link rel="stylesheet" href="https://unpkg.com/primeflex@latest/primeflex.css" />
    <script src="../js/login.js"></script>
</h:head>
<h:body>
    <main>
        <div class="login-container">
            <div class="p-2">
                <div class="flex flex-column">
                    <h2 class="text-center">Bienvenido al Sistema de Pagos</h2>
                </div>
                <h:form id="login-form" class="flex flex-column" styleClass="login-section">
                    <h2 class="mb-1">Iniciar Sesión</h2>
                    <p:growl id="messages" widgetVar="growlWV" show-detail="true" />
                    <div class="field">
                        <p:inputText class="w-full" placeholder="Email" id="emailInput" />
                    </div>
                    <div class="field">
                        <p:password class="w-full" placeholder="Contraseña"  id="passwordInput" />
                    </div>
                    <div class="flex justify-content-between">
                        <p:commandButton value="Ingresar" icon="pi pi-user"
                            class="ui-button-secondary" onclick="login(event)"/>
                        <p:commandButton value="Crear Cuenta" icon="pi pi-user-plus"
                            class="ui-button-secondary"
                            update=":dialogs:create-account-content" 
                            oncomplete="PF('createAccountDialog').show()">
                            <p:resetInput target=":dialogs:create-account-content" />
                        </p:commandButton>
                    </div>
                </h:form>
            </div>
        </div>

        <h:form id="dialogs">
            <p:dialog header="Crear cuenta" showEffect="fade" modal="true" widgetVar="createAccountDialog"
                responsive="true" draggable="false" resizable="false">
                <p:outputPanel id="create-account-content" class="ui-fluid">
                    <div class="field">
                        <p:outputLabel for="full-name">Nombres</p:outputLabel>
                        <p:inputText id="full-name" required="true"/>
                    </div>
                    <div class="field">
                        <p:outputLabel for="lastname">Apellidos</p:outputLabel>
                        <p:inputText id="lastname" required="true"/>
                    </div>
                    <div class="field">
                        <p:outputLabel for="email">Correo</p:outputLabel>
                        <p:inputText id="email" required="true"/>
                    </div>
                    <div class="field">
                        <p:outputLabel for="password">Contraseña</p:outputLabel>
                        <p:inputText id="password" onkeyup="checkPasswordStrength(this.value)" />
                        <p id="password-strength"></p>
                        <ul id="password-tips"></ul>
                    </div>
                </p:outputPanel>

                <f:facet name="footer">
                    <p:commandButton disabled="true" id="registerButton" value="Registrarme" icon="pi pi-check"  widgetVar="myButton"
                        class="ui-button-primary" onclick="registerUser();"
                        process="create-account-content @this" />
                    <p:commandButton value="Cancelar" icon="pi pi-times"
                        onclick="PF('createAccountDialog').hide()"
                        class="ui-button-secondary" type="button" />
                </f:facet>
            </p:dialog>
        </h:form>
    </main>
</h:body>
</h:html>
